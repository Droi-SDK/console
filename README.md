# 管理控制台使用指南

标签（空格分隔）： DroiBaas 控制台   使用指南

---

## 创建应用
对于刚接触DroiBaaS的用户来说，看到的控制台界面多数如下图所示：
![image.png-424.2kB][1]
这里显示的内容已经很清晰，用户很容易就能进行基本的操作

1. 通过箭头1指示的按钮，可以新建应用。
2. 已经创建好的应用显示在箭头2指示的区域，该区域显示了一些基本的统计数据，点击应用管理可以进入单个应用的应用管理界面，点击数据分析可以快速进入数据管理界面。
3. 在箭头3指示的搜索框可以快速查找已经创建好的某一应用。
4. 箭头4指向的是DroiBaaS官网的链接。
5. 箭头5指向的是与开发者账户相关的操作链接。


## 开发环境说明
开发环境分为沙箱环境和生产环境，在下图箭头所指的位置，可以快速切换开发环境：
![image.png-407.1kB][2]
* 沙箱环境：此环境是为了开发与调试所提供的环境，它与生产环境相互隔离，但具有生产环境几乎完全相同的功能，项目开发结束后迁徙到生产环境。

* 生产环境：应用创建完成后可以发布到生产环境，指正式对外提供服务的真实环境。
><font color=#FF0000>根据《移动互联网应用程序信息服务管理规定》第七条（一）的规定，所有开发者必须通过基于移动电话号码的真实身份信息认证。因此只有使用移动电话号码注册或绑定了移动电话号码的账号才能够发布生产环境。</font>
## 应用管理中心
根据上文所述，在单个应用卡中点击应用管理可以快速进入应用管理中心界面，进行相应的操作：
![image.png-440.1kB][3]</br>
这里主要划分四块区域内容：
* 区域1 显示所选择的应用名称，在此可以快速切换应用（点击应用名称）。
* 区域2 按照服务类型，将应用数据进行了一级分类。主要分为开发环境说明、应用管理中心和数据分析中心。
* 区域3 则是一级分类下，具体数据、具体功能的二级菜单。
* 区域4 展示具体的数据和结果。

下面重点看下各分类的具体内容和操作。

### 云控中心
><font color=#FF0000>详细的文档请参看[数据服务](https://www.droibaas.com/Index/document.html)</font>
#### 云数据
云数据是 DroiBaaS 提供的数据存储服务，它建立在对象 DroiObject 的基础上，所有 DroiObject 均存储在云端上。您可以通过CoreSDK 对其进行操作，也可在 DroiBaaS 后台管理所有的对象。包含数据库、用户列表（_User）、用户群组（_Group)以及文件存储（_File)；关于如何使用DroiBaaS提供的云端数据库和文件存储，请参阅以下文档：[Android开发指南](https://www.droibaas.com/html/doc_24125.html)或[iOS开发指南](https://www.droibaas.com/html/doc_24124.html)。

特别地，对以上数据管理可以在控制台完成，简易步骤如下：
创建Class
**进入控制台->云控中心->云数据**，该界面点击Code右侧的下拉框，点击Add Class即可为应用添加Class，如下图所示：
![image_1bhrfaa0khep142u1jsq1fig9fb9.png-48.4kB][4]
如下弹框中输入符合条件的Class Name后，点击确定即可完成：</br>
![image_1bhrfaoa062i1vvb11gnt5o16vjm.png-21.6kB][5]  
> 单个应用可创建class上限是50个。
##### 本地数据导入
如上图可以在云数据下找到`数据导入`选项。
> 由于云数据默认是UTF-8编码，直接在Excel中打开中文会出现乱码，需转换为ANSI编码。 </br>
> 导入单个文件应小于1MB，数据少于6000条。

##### 本地文件格式要求：
*	必须是CSV 文件
*	UTF-8 文件编码

##### CSV格式文件
导入Class的CSV文件格式必须符合我们的扩展要求：
*	第一行是字段名称
*	第二行开始是要导入的数据

```
Id,name,age
3f7c01e7d8e28483da3483c0,zhangwei,14
3f8d01e79e30ba810062199e,liheng,15
402501e7085234730aa433b0,zhaojun,14
402601e71127e5d0a3c9f4dd,hanxiao,14
402601e7bed0da212002393e,xiaojie,16

```
##### 云数据导出到本地

如上图可以在云数据下找到`数据导出`选项。

><font color=#FF0000>云数据默认为UTF-8编码，导出的CSV文件直接在Excel打开中文会出现乱码，需转为ANSI编码。</font>

##### 权限设置
如上图可以在云数据下找到`权限设置`选项。

* 权限范围包括所有人，指定用户，或群组对指定Class的读写权限设置。
* 步骤：选定指定对象和权限->确认添加->修改。

可以授权访问的用户类型有如下三种：
* 所有用户（表示所有 User 对象，包括匿名用户在内，都拥有访问权限）
* 指定群组（表示指定的群组里的User拥有访问权限）
* 指定用户（表示只有少数固定的 User 拥有访问权限）

##### 清理Class
如上图可以在云数据下找到`删除Class`选项。

删除 Class：除了所有数据（包含索引）之外，这会连 Class 元信息也一并删除。
> 删除Class只有沙箱环境可以，已经部署到生产环境的Class不要删除

对于每一个 Class，允许对如下几种操作分别授予用户操作权限：
  * 添加行
  * 添加列
  * 删除行
  * 刷新
  * 根据条件查询记录

如下图，可以对test表做以上各种操作，操作数据显示在箭头指示的区域：
![image_1bhrfbapnfhc1tvt51u1qmu197k13.png-33.8kB][6]

#### 云代码
云代码是部署运行在 DroiBaaS云引擎上的代码，您可以用它来实现较复杂的，需要运行在云端的业务逻辑。从客户端执行 DroiBaaS 云代码，使用基础类 DroiCloud 并结合基础类 DroiObject 来定义输入以及输出即可操作云代码。

详情参看：[云代码](https://www.droibaas.com/Index/document.html)
示例如下图所示：</br>
![image_1bhrfc62n13lo1nhlpjn1ji3lb81g.png-213.3kB][7]


#### 云引擎
云引擎让您可以通过WEB控制台，立刻执行，按照计划执行或使用条件触发执行特定的云代码。

云引擎中支持实时任务/计划任务/Hook任务，可以在**控制台->云控中心->云引擎**，进行设置，详细操作流程如下：

例如：任务的创建简介，如下图：

* 箭头1 显示三种不同的任务，点击相应的任务名称可以快速切换任务；
* 箭头2 点击此按钮可以相应的任务；
* 箭头3 指示区域显示已经创建完成的任务；
* 箭头4 指示具体创建的任务；
* 创建实时任务步骤：**控制台->云控中心->云引擎->选择实时任务->点击创建实时任务->填写任务名称->选择cloudcode路径->填写参数->确认**
* 创建计划任务步骤：**控制台->云控中心->云引擎->选择实时任务->点击创建实时任务->填写任务名称->选择cloudcode路径->填写参数->选择优先级->选择开始时间->选择执行间隔时间->确认**
* 创建Hook任务步骤：**控制台->云控中心->云引擎->选择实时任务->点击创建实时任务->选择cloudcode路径->选择class名称->选择触发条件->确认**</br>
![image_1bhrfcju6ke01jm2g26gb410l61t.png-32.9kB][8]
![image_1bhrfcuio97v1se81p4au1t1nc32a.png-19.3kB][9]

#### 云日志
记录执行过程中的日志，便于开发者分析问题。

步骤：**云日志->开始**。

#### 云参数 
云参数是一个全域只读的设置，可供应用程序使用，这个设置是个Key/Value形式。开发者对其进行设置后可在应用程序内读取。通过使用这一个功能可以做到让应用程序即时调整。

步骤：**云参数->添加云参数->输入参数名->输入参数类型->输入与参数类型对应的值->添加**。

### Restful API服务
* 基本API：此功能用于添加开发者所需的api接口，为用户提供便捷服务。
* 进阶API：卓易超管后台已添加的api显示在进阶API界面，用户在此购买需要使用的api接口。
* 我的API：用户已购买的api接口显示在该界面，并记录各接口的使用情况。

基本API创建步骤：**API服务->基本API->添加API->输入API名称->选择API类型->选择CloudCode路径->选择网络请求方式->输入URI->选择APIKey->添加**

* API名称：自定义。（例如：GetResult）
* 接口类型，CloudCode路径，Method,APIKey根据实际情况选择。
* URI：自定义。（例如：getresult）可在API列表->操作->详情->接口测试，查看完整API，并进行测试。
![image_1bhrfebkvq9fdjaujs162039i2n.png-75.1kB][10]    
 除了设置cloudcode的api，也可以设置我们预置的对于DroiObject DroiUser相关的api，详细操作流程请参看[Droi Restful API 使用说明](https://www.droibaas.com/html/doc_24715.html)
### 应用推送  
><font color=#FF0000>详细的文档请参看[消息推送](https://www.droibaas.com/Index/document.html)</font>


**控制台 -> 指定应用 -> 应用推送**路径下，包含四大子菜单：

* 推送通知：在线编辑推送消息内容，配置推送参数包括平台、消息样式、动作、推送目标、离线时间等，并开始推送消息；
* 通知记录：包含当前应用所有历史推送记录的展示和查询，同时支持消息的操作，例如详情查看、撤销和删除；
* 透传消息：在线编辑透传自定义消息，配置推送参数包括推送目标、发送时间、离线时间等，自定义消息会原样传递给应用；
* 透传消息记录：包含当前应用所有透传消息历史记录的展示和查询，支持消息记录的操作，包括查看详情、撤销和删除；

特别地，下列针对推送相关的操作，可以在控制台完成：  

![image_1bhrfebkvq9fdjaujs162039i2n.png-75.1kB][11]

#### 推送展示普通图片通知  
在**控制台->应用->应用推送->推送通知->通知栏样式**选择普通通知或者图片通知样式，按照要求编辑文本或者上传图片，每种样式均可设置是否展开大图，大图图片可在**展开式通知->大图**上传；

#### 推送消息点击后动作  
在**控制台->应用->应用推送->推送通知->后续动作**配置推送消息通知的点击动作，包括：  

* 打开应用  
打开当前应用，根据需要，在键值对列表中编辑打开应用需要传递的参数；  

* 打开网页  
点击推送消息通知后打开网页，网址可在选中后编辑输入；  

* 打开指定应用界面  
点击推送消息通知后打开应用指定activity，选择后编辑输入填写完整的包名和activity名称，同时可以根据需要，创建键值对参数作为打开activity传入的参数；  

* 下载应用  
点击推送消息通知后下载应用，选择后需编辑应用名称、应用介绍图片、应用下载地址以及应用包名；

#### 设置消息提醒方式  
在**控制台->应用->应用推送->推送通知->提醒方式**设置提醒方式，包括响铃、震动、呼吸灯闪烁，同时还可以设置通知是否可清除；

#### 设置消息推送目标  
在**控制台->应用->应用推送->推送通知->发送给**设置推送目标，包括：  

* 所有人
将消息推送给所有安装当前应用的设备；

* 特定用户  
推送消息给指定设备集合，选择该选项并上传设备deviceId文件即可推送；

* 单播  
推送消息给单个设备，编辑单个目标设备的deviceId，此deviceId可从推送SDK中获取；

* 用户标签  
卓易推送SDK提供接口供应用上传标签，在**用户标签->应用标签**中列举所有上传标签集合，根据运营的推送需求，可以选择标签集合或者通过标签集合运算，将消息推送给所有安装该应用并设定标签的设备；

#### 设置消息推送时间
在**控制台->应用->应用推送->推送通知->发送时间**设置定时推送，包括：  

* 立即发送
编辑完推送消息之后立即发送；

* 定时发送  
选择后填写消息下发时间，到达该时间之后开始下发消息；

#### 设置消息离线时间  
每条消息必须在**控制台->应用->应用推送->推送通知->离线时间**设置在推送服务器上的有效时间，在该时间范围之内，离线设备上线后依旧能接收到消息，超出离线时间后消息会被取消下发；

#### 设置推送消息展示方式  
在**控制台->应用->应用推送->推送通知->展示类型**设置消息展示类型，包括：

* 展示一次  
消息推送后仅展示一次；

* 循环展示  
消息推送后每间隔指定时间循环展示一遍，时间间隔可在该选项中指定；

* 定时展示  
推送消息下达后在指定时间范围内展示；

#### 查询推送消息记录  
在**控制台->应用->应用推送->通知记录**中查看推送历史纪录：

* 箭头1/箭头2 指示的是搜索条件，用户可根据一定的条件查询相应的推送记录；

* 箭头3 指示区域显示查询出的推送记录；</br>
![image_1bhrff51pj6t1tdvbd51vk11t3934.png-37kB][12]

#### 查询透传消息记录  
在**控制台->应用->应用推送->透传消息/透传消息记录**，进行透传消息推送/查询已发送的透传消息，
透传消息的各字段内容解释以及查询透传消息记录请参见普通推送消息，此处省略。


### 账号服务
><font color=#FF0000>详细的文档请参看[用户管理](https://www.droibaas.com/Index/document.html)</font>


#### 第三方登录
* 使用DroiUser账号框架快速搭建您自己的账号系统后，还可以快速轻松的接入多种第三方登录，请首先至第三方登录授权网站开通相关服务并获取对应的授权信息。
* 平台目前支持的第三方登录为QQ，微信，新浪微博。
* 用户根据自己的需要，去相应的平台申请相应的参数。
* 步骤：**账户服务->第三方登录->选择相应的第三方平台编辑->输入参数->保存**

### 短信服务
><font color=#FF0000>详细的文档请参看[短信验证](https://www.droibaas.com/Index/document.html)</font>
* 短信模板：用户可自定义短信模板，包括编辑短信内容，短信有效时间等。
* 短信记录：用户可查看发送短信的记录，以及短信数据统计。

**控制台->短信服务->短信模板->创建模板**，进行短信模板创建 如下图示例：
* 箭头1 点击此处即可设置模板名称。
* 箭头2 在此区域编辑短信内容。
* 箭头3 在此设置签名,例如“上海卓易科技”。
* 箭头4 在此设置短信的y有效时间。

![image_1bhrfg2nfv2rllh1i231f8h6j53h.png-44.8kB][19]

**控制台->短信服务->短信j记录**，查看短信记录和数据统计 如下图示例：
![image_1bhrfg2nfv2rllh1i231f8h6j53h.png-44.8kB][20]

### 自更新
><font color=#FF0000>详细的文档请参看[版本更新](https://www.droibaas.com/Index/document.html)</font>

* 更新设置：应用更新帮助开发者将应用升级到最新版本，可以让存量用户体验到应用的最新版本。由于iOS系统限制，目前暂时只提供Android版本的相关功能。
* 渠道设置：正常情况下，系统会自动获取所有终端设备的渠道信息。由于网络原因或数据传输延迟可能导致部分渠道信息更新不及时，特提供手动维护渠道信息的功能，方便您及时将最新版本更新到相关设备上。

这部分功能可以在控制台完成：

**控制台->应用设置->自定义渠道**，进行添加渠道 如下图示例：
* 箭头1 点击此处即可添加渠道。
* 箭头2 已添加的渠道显示在此区域。
* 箭头3 指示具体如何添加渠道。
><font color=#FF0000>注意：添加渠道时，渠道名称唯一。系统会在T+1自动获取SDK上报的渠道，仅对于当日更新，尚未上报的渠道才需要设置自定义渠道。一旦相关渠道通过SDK上报后，同名渠道会进行自动合并。</font>

![image_1bhrfg2nfv2rllh1i231f8h6j53h.png-44.8kB][13]
![image_1bhrfgb0qn3jld41ff61mmgo0c3u.png-13.8kB][14]

**控制台->自更新->更新设置**，进行添加更新，如下图示例：

![image_1bhrfgo891nlb1qql1o1lmvh1qtb4b.png-38.6kB][15]
![image_1bhrfgv5r1ok1fu1sqe5251cqu4o.png-30.6kB][16]
* 箭头1 点击此处可添加更新。
* 箭头2 已添加的更新显示在此区域。
* 箭头3 添加更新时具体的操作。

* 更新类型：支持应用更新和文件更新两种类型。
* 更新策略：支持提示、强制和静默更新；提示更新是指若有最新版本时会弹出版本更新提示，用户更新与否可以自己选择；强制更新是指必须选择更新否则应用就不能使用；静默更新是指不会给用户更新提示而自动升级程序至最新版本。
* 文件：当更新类型选择应用时此处要上传apk应用；当更新类型选择文件时此处要上传相应的文件。
* 渠道：指更新渠道。
* 更新日志：此处用户可以描述更新的内容。

### 用户反馈
><font color=#FF0000>详细的文档请参看[用户反馈](https://www.droibaas.com/Index/document.html)</font>


使用DroiBaaS快速建立用户反馈系统，可以让您轻松建立起与用户沟通的桥梁。DroiBaaS控制台界面如下：
![image_1bhrfhr4kqimoem1apladge5q55.png-19kB][17]
客户端用户反馈的意见会显示在上图反馈列表中，相关人员可以针对该条意见回复用户。
今日用户反馈的意见数、今日回复的数目以及总的反馈数量都会显示在图表中。

### 应用设置
#### 设置详情
使用DroiBaaS提供的强大应用管理功能可以让您实现多开发者协作，沙箱环境（Sandbox）与生产环境（Production）的切换，云代码版本管理等强大的功能。  

* 部署生产环境：可以将应用部署到生产环境。
* 编辑详情：可以修改应用名称、应用图标、增加应用描述、上传IOS证书等操作。
* 协作者设置：可为为该应用添加写作者账号，添加后写作者可以对该应用做相关操作。同时可以分配该协作者不同的操作权限。
* 安全设置：包含推送、自更新、短信和用户反馈服务的控制开关，开启开关后会为相应服务生成新的apiKey，服务才能生效。同时可在该界面设置Restful API访问的安全域名。注意：通过"关闭-重启"开关可重置服务的apiKey，使历史apiKey失效，建议将服务的apiKey复制保存在应用服务器中，便于应用动态更新。
* 删除应用注意：应用一旦被删除后基于该应用的所有数据都会被清除，故要删除应用时要慎重。

#### 安全密钥
* 用于在开发过程中可能使用到的各种身份识别信息，请妥善保管，避免泄露信息。 
* 目前DroiBaaS的安全密钥包括Developer token 、Application ID （沙箱和生产环境）、MasterKey 以及用户创建的ApiKey等。
* 用户如果使用了不同的SDK需要在配置不同的key，如下图用到短信服务，需要复制短信服务的key，在SDK中进行设置。    
![image_1bhrfhr4kqimoem1apladge5q55.png-19kB][18]


## 数据分析中心
><font color=#FF0000>详细的文档请参看[统计分析](https://www.droibaas.com/Index/document.html)</font>


**登陆账号->选择应用->数据分析中心** 主要包含了七大菜单和趋势介绍：

 - 用户分析：包含了新增用户，活跃用户，沉默用户，启动次数，以及版本分布；
 - 渠道分析：以渠道为统计维度，来分析用户属性；
 - 用户参与度：包含使用时长、使用频率、访问页面、使用间隔；
 - 终端属性：包含设备终端、网络及运营商、地域分析项；
 - 留存分析：包含留存用户及周用户构成；
 - 功能使用：包括自定义事件的统计分析，产品经理可以通过自定义事件做更全面的信息分析；
 - 错误分析：包括错误趋势及错误列表，开发人员可以通过该信息及时定位修复问题；

><font color=#FF0000>如对数据分析存在任何疑问，或出现任何数据相关的问题，您可加入官方讨论群或提交工单进行反馈。</font>

## 个人中心
在控制台，点击右上角用户名，上下文菜单中选择`个人中心`，可以查看、修改账号及套餐等信息。

### 基本信息
包括修改密码，修改头像，绑定/换绑手机号，绑定/换绑邮箱，编辑个人信息。为了更好的服务开发者，建议您完善开发者信息，填写真实姓名、电话号码。比如：

 - 在关键时刻（服务宕机等意外情况），我们可以及时与您取得联系，做好事故沟通和应对措施
 - `技术支持 Ticket`里会用到这些信息
 - 发票相关的信息也来自这里

### 财务总览
显示了财务总览，套餐使用情况，套餐外使用情况,同时在这里可以进行更换账单，充值。

### 财务记录
显示了每月账单的金额，类型，用户余额和套餐信息。

### 邀请有礼
显示专属的邀请链接，邀请后可以获得邀请奖励金。

## 我的工单
在控制台，点击右上角用户名，上下文菜单中选择`我的工单`，即可进入我的工单界面。这里可以提交工单以及查看已提交的工单。
如果只是提交工单，您还可以在控制台的右下角点击`提交工单`。


  [1]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895485897646686208/1.png
  [2]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895486871584788480/2.png
  [3]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487037544194048/3.png
  [4]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895541344872292352/4.png
  [5]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487111016890368/5.png
  [6]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487142745726976/6.png
  [7]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487173855694848/7.png
  [8]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895553571503198208/8.png
  [9]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487232882651136/9.png
  [10]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487265517064192/10.png
  [11]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487294903824384/11.png
  [12]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487321650642944/12.png
  [13]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487350910365696/13.png
  [14]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487380701175808/14.png
  [15]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895487412356919296/15.png
  [16]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895488719180152832/16.png
  [17]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895488754797924352/17.png
  [18]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895488798698889216/18.png
  [19]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895923868023799808/19.png
  [20]: http://o8fvmbzh.droibaascdn.com/droi/o8fvmbzhvcPYgPaRMBRHfuiP8I3MFNx1lQDQKlwH/895923905130549248/20.png
